<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>å‘å¸–</title></head>
<body>
  <h2>ğŸ“ å‘å¸ƒæ–°å¸–</h2>
  <input id="title" placeholder="æ ‡é¢˜"><br>
  <textarea id="content" placeholder="å†…å®¹"></textarea><br>
  <button onclick="post()">å‘å¸ƒ</button>
  <p id="msg"></p>

  <script>
    async function post() {
      const title = document.getElementById("title").value;
      const content = document.getElementById("content").value;
      const token = localStorage.getItem("zsy_token");
      const res = await fetch("/api/forum/post", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${token}`
        },
        body: JSON.stringify({ title, content })
      });
      const data = await res.json();
      if (data.message) location.href = "/forum";
      else document.getElementById("msg").innerText = data.error || "å‡ºé”™äº†";
    }
  </script>
</body>
</html>
